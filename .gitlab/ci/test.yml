### TEST STAGE JOBS ###

lint:
  extends: 
    - .nox
    - .rules_main_mr
  script:
    - nox -e lint

minimum install:
  extends: 
    - .nox_all
    - .rules_main_mr_code
  script:
    - nox -e deps

typecheck:
  extends: 
    - .nox_all
    - .rules_main_mr_code
  script:
    - nox -e type

test:
  extends: 
    - .nox_all
    - .rules_main_mr_code
  script:
    - nox -e test
  artifacts:
    reports:
      junit: output/junit.*.xml
    paths:
      - output/*

conda:
  extends: 
    - .conda_all
    - .rules_main_mr_code
  script:
    - pytest -m 'not optional'

verify lock:
  extends: 
    - .nox
    - .rules_main_mr_deps
  script:
    - nox -e check